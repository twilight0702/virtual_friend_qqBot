import{m as T,bC as k,b6 as C,Q as _,aM as Q,aF as x,aN as q,d as K,j as g}from"./index-BzAQRMoo.js";import{r as s}from"./react-router-dom-BfuE-jt0.js";var Y=T({base:"flex flex-col gap-2 items-start"});function de(t){let{description:e,errorMessage:a,isInvalid:l,validationState:i}=t,{labelProps:r,fieldProps:n}=k(t),d=C([!!e,!!a,l,i]),o=C([!!e,!!a,l,i]);return n=_(n,{"aria-describedby":[d,o,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:r,fieldProps:n,descriptionProps:{id:d},errorMessageProps:{id:o}}}function ce(t,e,a){let{validationBehavior:l,focus:i}=t;Q(()=>{if(l==="native"&&(a!=null&&a.current)){let o=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(o),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(G(a.current))}});let r=x(()=>{e.resetValidation()}),n=x(o=>{var c;e.displayValidation.isInvalid||e.commitValidation();let f=a==null||(c=a.current)===null||c===void 0?void 0:c.form;if(!o.defaultPrevented&&a&&f&&H(f)===a.current){var v;i?i():(v=a.current)===null||v===void 0||v.focus(),q("keyboard")}o.preventDefault()}),d=x(()=>{e.commitValidation()});s.useEffect(()=>{let o=a==null?void 0:a.current;if(!o)return;let c=o.form;return o.addEventListener("invalid",n),o.addEventListener("change",d),c==null||c.addEventListener("reset",r),()=>{o.removeEventListener("invalid",n),o.removeEventListener("change",d),c==null||c.removeEventListener("reset",r)}},[a,n,d,r,l])}function z(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function G(t){return{isInvalid:!t.validity.valid,validationDetails:z(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function H(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}const A={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},F={...A,customError:!0,valid:!1},$={isInvalid:!1,validationDetails:A,validationErrors:[]},B=s.createContext({}),L="__formValidationState"+Date.now();function ue(t){if(t[L]){let{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:i,commitValidation:r}=t[L];return{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:i,commitValidation:r}}return J(t)}function J(t){let{isInvalid:e,validationState:a,name:l,value:i,builtinValidation:r,validate:n,validationBehavior:d="aria"}=t;a&&(e||(e=a==="invalid"));let o=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:F}:null,c=s.useMemo(()=>{if(!n||i==null)return null;let u=W(n,i);return P(u)},[n,i]);r!=null&&r.validationDetails.valid&&(r=void 0);let f=s.useContext(B),v=s.useMemo(()=>l?Array.isArray(l)?l.flatMap(u=>M(f[u])):M(f[l]):[],[f,l]),[N,O]=s.useState(f),[I,b]=s.useState(!1);f!==N&&(O(f),b(!1));let y=s.useMemo(()=>P(I?[]:v),[I,v]),S=s.useRef($),[p,V]=s.useState($),m=s.useRef($),U=()=>{if(!R)return;E(!1);let u=c||r||S.current;h(u,m.current)||(m.current=u,V(u))},[R,E]=s.useState(!1);return s.useEffect(U),{realtimeValidation:o||y||c||r||$,displayValidation:d==="native"?o||y||p:o||y||c||r||p,updateValidation(u){d==="aria"&&!h(p,u)?V(u):S.current=u},resetValidation(){let u=$;h(u,m.current)||(m.current=u,V(u)),d==="native"&&E(!1),b(!0)},commitValidation(){d==="native"&&E(!0),b(!0)}}}function M(t){return t?Array.isArray(t)?t:[t]:[]}function W(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return M(a)}return[]}function P(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:F}:null}function h(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,l)=>a===e.validationErrors[l])&&Object.entries(t.validationDetails).every(([a,l])=>e.validationDetails[a]===l)}let j=new Map;function X(t,e){if(t===e)return t;let a=j.get(t);if(a)return a.forEach(i=>i(e)),e;let l=j.get(e);return l?(l.forEach(i=>i(t)),t):e}function Z(...t){return(...e)=>{for(let a of t)typeof a=="function"&&a(...e)}}function ee(...t){let e={...t[0]};for(let a=1;a<t.length;a++){let l=t[a];for(let i in l){let r=e[i],n=l[i];typeof r=="function"&&typeof n=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=Z(r,n):(i==="className"||i==="UNSAFE_className")&&typeof r=="string"&&typeof n=="string"?e[i]=K(r,n):i==="id"&&r&&n?e.id=X(r,n):e[i]=n!==void 0?n:r}}return e}function te(...t){return t.length===1&&t[0]?t[0]:e=>{for(let a of t)typeof a=="function"?a(e):a!=null&&(a.current=e)}}function ae(t){const e=s.useRef(null);return s.useMemo(()=>({get current(){return e.current},set current(a){e.current=a,typeof t=="function"?t(a):t&&(t.current=a)}}),[t])}var D=Symbol("default");function ie(t,e){let a=s.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let l=new Intl.ListFormat().format(Object.keys(a.slots).map(r=>`"${r}"`));if(!e&&!a.slots[D])throw new Error(`A slot prop is required. Valid slot names are ${l}.`);let i=e||D;if(!a.slots[i])throw new Error(`Invalid slot "${e}". Valid slot names are ${l}.`);return a.slots[i]}return a}function re(t,e,a){let l=ie(a,t.slot)||{},{ref:i,...r}=l,n=ae(s.useMemo(()=>te(e,i),[e,i])),d=ee(r,t);return"style"in r&&r.style&&"style"in t&&t.style&&(typeof r.style=="function"||typeof t.style=="function"?d.style=o=>{let c=typeof r.style=="function"?r.style(o):r.style,f={...o.defaultStyle,...c},v=typeof t.style=="function"?t.style({...o,defaultStyle:f}):t.style;return{...f,...v}}:d.style={...r.style,...t.style}),[d,n]}var w=s.createContext(null),fe=s.forwardRef(function(e,a){[e,a]=re(e,a,w);let{validationErrors:l,validationBehavior:i="native",children:r,className:n,...d}=e;const o=s.useMemo(()=>Y({className:n}),[n]);return g.jsx("form",{noValidate:i!=="native",...d,ref:a,className:o,children:g.jsx(w.Provider,{value:{...e,validationBehavior:i},children:g.jsx(B.Provider,{value:l??{},children:r})})})});export{ue as $,fe as F,de as a,ce as b,w as c,ie as u};
